class GeoUtility{constructor(){this.geoInfo={country:null,countryCode:null,region:null,city:null,latitude:null,longitude:null,timezone:null,ip:null,accuracy:null},this.providers={ipApi:"https://ipapi.co/json/",geoJs:"https://get.geojs.io/v1/ip/geo.json"}}async getBrowserLocation(){return new Promise((e,t)=>{if(!navigator.geolocation)return t(Error("Geolocation not supported"));navigator.geolocation.getCurrentPosition(t=>{let n=t.coords;this.geoInfo.latitude=n.latitude,this.geoInfo.longitude=n.longitude,this.geoInfo.accuracy=n.accuracy,this.reverseGeocode(n.latitude,n.longitude).then(t=>e(t)).catch(t=>{e(this.geoInfo)})},n=>{this.getIpBasedLocation().then(t=>e(t)).catch(e=>t(e))},{enableHighAccuracy:!1,timeout:5e3,maximumAge:864e5})})}async getIpBasedLocation(){try{let e=await fetch(this.providers.ipApi);if(!e.ok)return this.getBackupLocation();let t=await e.json();return this.geoInfo={country:t.country_name||null,countryCode:t.country_code||null,region:t.region||null,city:t.city||null,latitude:t.latitude||null,longitude:t.longitude||null,timezone:t.timezone||null,ip:t.ip||null,accuracy:"ip"},this.geoInfo}catch(n){return this.getBackupLocation()}}async getBackupLocation(){try{let e=await fetch(this.providers.geoJs);if(!e.ok)throw Error("Failed to fetch backup location data");let t=await e.json();return this.geoInfo={country:t.country||null,countryCode:t.country_code||null,region:t.region||null,city:t.city||null,latitude:parseFloat(t.latitude)||null,longitude:parseFloat(t.longitude)||null,timezone:null,ip:t.ip||null,accuracy:"ip"},this.geoInfo}catch(n){return console.warn("Error getting backup location data:",n),this.geoInfo}}async reverseGeocode(e,t){try{let n=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=10`,r=await fetch(n,{headers:{"User-Agent":"DataFlowwAnalytics/1.0"}});if(!r.ok)throw Error("Reverse geocoding failed");let i=await r.json(),o=i.address||{};return this.geoInfo={...this.geoInfo,country:o.country||this.geoInfo.country,countryCode:o.country_code||this.geoInfo.countryCode,region:o.state||this.geoInfo.region,city:o.city||o.town||o.village||this.geoInfo.city,accuracy:"high"},this.geoInfo}catch(a){return console.warn("Reverse geocoding error:",a),this.geoInfo}}async getBestLocationData(){try{let e=localStorage.getItem("df_geo_info");if(e){let t=JSON.parse(e),n=localStorage.getItem("df_geo_timestamp");if(n&&Date.now()-parseInt(n,10)<864e5)return this.geoInfo=t,this.geoInfo}return await this.getBrowserLocation()}catch(r){return await this.getIpBasedLocation()}finally{localStorage.setItem("df_geo_info",JSON.stringify(this.geoInfo)),localStorage.setItem("df_geo_timestamp",Date.now().toString())}}}const geoUtil=new GeoUtility;window.sendTrackedEvents=async function(e,t={}){try{let n={},r=localStorage.getItem("df_geo_info");r?n=JSON.parse(r):geoUtil.getBestLocationData().then(e=>{}).catch(e=>console.warn("Error getting geo data:",e));let i=new AbortController,o=setTimeout(()=>i.abort(),3e3),a=await fetch("https://api.datafloww.me/analytics/track",{method:"POST",headers:{"Content-Type":"application/json","X-Client-Version":"1.0"},body:JSON.stringify({event:e,type:t.type||"track",timestamp:new Date().toISOString(),...t,geo:n}),signal:i.signal});clearTimeout(o),a.ok||console.warn(`Failed to send event: ${e}`,a.status)}catch(u){"AbortError"===u.name?console.warn(`Timeout sending event: ${e}`):console.warn(`Error sending event: ${e}`,u);let c=JSON.parse(localStorage.getItem("df_failed_events")||"[]");c.push({eventName:e,data:t,timestamp:new Date().toISOString()}),localStorage.setItem("df_failed_events",JSON.stringify(c.slice(-20)))}},window.analyticsEventPlugin=function(e){return{name:"datafloww-plugin",init({config:t}){sendTrackedEvents("SDK Initialized",{type:"init",writeKey:e,config:t,clientInfo:{viewport:`${window.innerWidth}x${window.innerHeight}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}})},pageEnd({payload:t,config:n}){sendTrackedEvents("Page Viewed",{type:"page",writeKey:e,payload:t,config:n})},trackEnd({payload:t,config:n}){sendTrackedEvents(t.event||"Custom Event",{type:"track",writeKey:e,payload:t,config:n})},identifyEnd({payload:t,config:n}){sendTrackedEvents("User Identified",{type:"identify",writeKey:e,payload:t,config:n})},reset({config:e}){sendTrackedEvents("Session Reset",{type:"reset",config:e})},getState:({config:e})=>({...e})}},function(){var e;geoUtil.getBestLocationData().catch(e=>{console.warn("Unable to get location data:",e)});let t=document.currentScript.getAttribute("data-global-df-analytics-key");if(!t){console.error("Datafloww Analytics: Missing API Key!");return}let n=localStorage.getItem("df_session"),r=localStorage.getItem("df_session_timestamp"),i=localStorage.getItem("__anon_id");i||(i=crypto.randomUUID(),localStorage.setItem("__anon_id",i));let o=Date.now();(!n||!r||o-parseInt(r,10)>18e5)&&(n=crypto.randomUUID(),localStorage.setItem("df_session",n)),localStorage.setItem("df_session_timestamp",o.toString());let a={};function u(e,r={}){if(/bot|crawler|spider|googlebot|slurp|bingbot/i.test(navigator.userAgent)||"interaction"===r.type&&function e(t,n=2e3){let r=a[t]||0,i=Date.now();return!(i-r>n)||(a[t]=i,!1)}(e))return;let o={url:window.location.href,path:window.location.pathname,hostname:window.location.hostname,referrer:document.referrer,userAgent:navigator.userAgent,language:navigator.language,screenSize:`${window.screen.width}x${window.screen.height}`,viewportSize:`${window.innerWidth}x${window.innerHeight}`,connection:navigator.connection?{effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt}:null},u=localStorage.getItem("__user_id"),c={type:r.type||"track",writeKey:t,sessionId:n,...u?{userId:u}:{anonId:i},...o,...r};sendTrackedEvents(e,c)}function c(e){let t=e.getBoundingClientRect();return{x:Math.round(t.left+window.scrollX),y:Math.round(t.top+window.scrollY),viewport:{x:Math.round(t.left),y:Math.round(t.top)}}}document.addEventListener("click",e=>{let t=e.target.closest("[data-track], button, a, [role='button']");if(t&&!t.closest("form")){let n=t.innerText?t.innerText.trim().substring(0,30):"";u(t.getAttribute("data-track")||(n?`Clicked ${n}`:`Clicked ${t.tagName.toLowerCase()}`),{type:"interaction",category:t.tagName.toLowerCase(),id:t.id||null,class:t.className||null,href:t.href||null,text:n||null,position:c(t)})}}),document.addEventListener("submit",e=>{let t=e.target,n=t.getAttribute("data-track")||`Submitted ${t.id||t.name||"form"}`,r={},i=t.querySelectorAll("input, select, textarea");i.forEach(e=>{let t=e.type||e.tagName.toLowerCase();r[t]=(r[t]||0)+1}),u(n,{type:"interaction",formId:t.id||t.name||"unknown",formAction:t.action||null,fieldCounts:r,formValid:t.checkValidity()})}),document.addEventListener("click",e=>{let t=e.target.closest("a[href]");t&&t.hostname!==window.location.hostname&&u("Clicked External Link",{type:"interaction",url:t.href,linkText:t.innerText?t.innerText.trim().substring(0,50):null,position:c(t)})});let s=[25,50,75,90,100],l=new Set,f,d=(e=()=>{let e=document.documentElement.scrollHeight-window.innerHeight,t=window.scrollY;if(e<=0)return;let n=Math.round(t/e*100),r=0;s.forEach(e=>{n>=e&&!l.has(e)&&(r=e)}),r>0&&(u(`Scrolled ${r}%`,{type:"interaction",depth:`${r}%`,pageHeight:e,readTime:Math.round((performance.now()-p)/1e3)}),l.add(r))},function(){let t=this,n=arguments;clearTimeout(f),f=setTimeout(()=>e.apply(t,n),500)});window.addEventListener("scroll",d);let p=performance.now(),g=Date.now();setInterval(()=>{let e=Date.now();e-g>3e4&&"visible"===document.visibilityState&&(u("Heartbeat",{type:"engagement",duration:Math.round((performance.now()-p)/1e3)}),g=e)},3e4),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState?u("Page Hidden",{type:"engagement",duration:Math.round((performance.now()-p)/1e3)}):u("Page Visible",{type:"engagement"})}),window.addEventListener("beforeunload",()=>{u("Page Exit",{type:"engagement",duration:Math.round((performance.now()-p)/1e3),scrollDepth:Math.max(...Array.from(l))||0})}),window.addEventListener("load",()=>{setTimeout(()=>{let[e]=performance.getEntriesByType("navigation"),t=performance.getEntriesByType("paint"),n=t.find(e=>"first-paint"===e.name),r=t.find(e=>"first-contentful-paint"===e.name),i=null;if(window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("largest-contentful-paint")){let o=[],a=new PerformanceObserver(e=>{o.push(...e.getEntries())});a.observe({type:"largest-contentful-paint",buffered:!0}),o.length>0&&(i=o[o.length-1].startTime)}e&&u("Page Performance",{type:"performance",domLoad:Math.round(e.domContentLoadedEventEnd-e.startTime),windowLoad:Math.round(e.loadEventEnd-e.startTime),firstPaint:n?Math.round(n.startTime):null,firstContentfulPaint:r?Math.round(r.startTime):null,largestContentfulPaint:i?Math.round(i):null,navigationTimingInfo:{redirectTime:Math.round(e.redirectEnd-e.redirectStart),dnsTime:Math.round(e.domainLookupEnd-e.domainLookupStart),tcpTime:Math.round(e.connectEnd-e.connectStart),ttfb:Math.round(e.responseStart-e.requestStart)}})},3e3);let e=localStorage.getItem("df_user_id")||null;if(e&&window.analytics.identify(e,{}),window.analytics&&"function"==typeof window.analytics.page&&window.analytics.page(),"navigation"in window.performance){let t=performance.getEntriesByType("navigation")[0]?.type;"back_forward"===t&&u("Returned via Back/Forward",{type:"navigation"})}});let m=window.location.pathname;function y(){let e=JSON.parse(localStorage.getItem("df_failed_events")||"[]");if(0===e.length)return;let t=e.splice(0,5);localStorage.setItem("df_failed_events",JSON.stringify(e)),t.forEach(e=>{sendTrackedEvents(e.eventName,{...e.data,retried:!0,originalTimestamp:e.timestamp})})}setInterval(()=>{let e=window.location.pathname;e!==m&&(u("Route Changed",{type:"navigation",from:m,to:e}),m=e)},500),y(),setInterval(y,6e4)}(),_analytics=function(e){"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?n(Object(i),!0).forEach(function(n){t(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function i(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var o="undefined",a="object",u="undefined"!=typeof process?process:{};u.env&&u.env.NODE_ENV;var c="undefined"!=typeof document;function s(e,t){return t.charAt(0)[e]()+t.slice(1)}null!=u.versions&&u.versions.node,"undefined"!=typeof Deno&&Deno.core,c&&"nodejs"===window.name||"undefined"!=typeof navigator&&void 0!==navigator.userAgent&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));var l=s.bind(null,"toUpperCase"),f=s.bind(null,"toLowerCase");function d(e,t){void 0===t&&(t=!0);var n,r,i=(r=e,v(r)?l("null"):"object"==typeof r?(n=r,g(n.constructor)?n.constructor.name:null):Object.prototype.toString.call(r).slice(8,-1));return t?f(i):i}function p(e,t){return typeof t===e}var g=p.bind(null,"function"),m=p.bind(null,"string"),y=p.bind(null,"undefined"),h=p.bind(null,"boolean");function v(e){return null===e}function $(e){var t;if(!(t=e)||"object"!=typeof t&&null===t)return!1;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function b(e,t){if("object"!=typeof t||v(t))return!1;if(t instanceof e)return!0;var n,r,i=d(new e(""));if((n=t)instanceof Error||m(n.message)&&n.constructor&&"number"===d(r=n.constructor.stackTraceLimit)&&!isNaN(r))for(;t;){if(d(t)===i)return!0;t=Object.getPrototypeOf(t)}return!1}function I(e,t){var n,r,i=e instanceof Element||e instanceof HTMLDocument;return i&&t?(n=e,void 0===(r=t)&&(r=""),n&&n.nodeName===r.toUpperCase()):i}function w(e){var t=[].slice.call(arguments,1);return function(){return e.apply(void 0,[].slice.call(arguments).concat(t))}}function S(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function E(e,t,n){for(var r=t.length-1,i=0;i<r;++i){var o=t[i];if("__proto__"===o||"constructor"===o)break;o in e||(e[o]={}),e=e[o]}e[t[r]]=n}function k(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],i=15&n;e+="-"==r||"4"==r?r:("x"==r?i:3&i|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}p.bind(null,"symbol"),b.bind(null,TypeError),b.bind(null,SyntaxError),w(I,"form"),w(I,"button"),w(I,"input"),w(I,"select");var x="global",_="__global__",P=typeof self===a&&self.self===self&&self||typeof global===a&&global.global===global&&global||void 0;function A(e){return P[_][e]}function T(e,t){return P[_][e]=t}function N(e){delete P[_][e]}function L(e,t,n){var r;try{if(z(e)){var i=window[e];r=i[t].bind(i)}}catch(o){}return r||n}P[_]||(P[_]={});var C={};function z(e){if(typeof C[e]!==o)return C[e];try{var t=window[e];t.setItem(o,o),t.removeItem(o)}catch(n){return C[e]=!1}return C[e]=!0}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var j="function",U="undefined",D="@@redux/"+Math.random().toString(36),M=typeof Symbol===j&&Symbol.observable||"@@observable",B=" != "+j;function V(e,t){var n=t&&t.type;return"action "+(n&&n.toString()||"?")+"reducer "+e+" returns "+U}function q(){var e=[].slice.call(arguments);return 0===e.length?function(e){return e}:1===e.length?e[0]:e.reduce(function(e,t){return function(){return e(t.apply(void 0,[].slice.call(arguments)))}})}function R(){var e=arguments;return function(t){return function(n,r,i){var o,a=t(n,r,i),u=a.dispatch,c={getState:a.getState,dispatch:function(e){return u(e)}};return o=[].slice.call(e).map(function(e){return e(c)}),O({},a,{dispatch:u=q.apply(void 0,o)(a.dispatch)})}}}var H="__anon_id",F="__user_id",G="__user_traits",X="userId",K="anonymousId",W=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted",],J=["name","EVENTS","config","loaded"],Y=W.reduce(function(e,t){return e[t]=t,e},{registerPluginType:function(e){return"registerPlugin:"+e},pluginReadyType:function(e){return"ready:"+e}}),Z=/^utm_/,Q=/^an_prop_/,ee=/^an_trait_/;function et(e){return{userId:e.getItem(F),anonymousId:e.getItem(H),traits:e.getItem(G)}}var en=function(e){return"__TEMP__"+e},er={};function ei(e,t){er[e]&&g(er[e])&&(er[e](t),delete er[e])}function eo(e){return{abort:e}}var ea=function(e){var t=e.data,n=e.action,r=e.instance,i=e.state,o=e.allPlugins,a=e.allMatches,u=e.store,c=e.EVENTS;try{var s,l,f=i.plugins,d=i.context,p=n.type,m=p.match(eu),y=t.exact.map(function(e){return e.pluginName});m&&(y=a.during.map(function(e){return e.pluginName}));var h=(s=r,l=y,function(e,t,n){var r,i,o,a,u,c,f,d=t.config,p=t.name,g=p+"."+e.type;n&&(g=n.event);var m,y=e.type.match(eu)?(r=p,i=g,o=l,a=n,u=e,function(e,t){var n=a?a.name:r,c=t&&ey(t)?t:o;if(a&&(!(c=t&&ey(t)?t:[r]).includes(r)||1!==c.length))throw Error("Method "+i+" can only abort "+r+" plugin. "+JSON.stringify(c)+" input valid");return O({},u,{abort:{reason:e,plugins:c,caller:i,_:n}})}):(c=e,f=g,function(){throw Error(c.type+" action not cancellable. Remove abort in "+f)});return{payload:(m=e,Object.keys(m).reduce(function(e,t){return"type"===t||(e[t]=$(m[t])?Object.assign({},m[t]):m[t]),e},{})),instance:s,config:d||{},abort:y}}),v=t.exact.reduce(function(e,t){var n=t.pluginName,r=t.methodName,i=!1;return r.match(/^initialize/)||r.match(/^reset/)||(i=!f[n].loaded),d.offline&&r.match(/^(page|track|identify)/)&&(i=!0),e[""+n]=i,e},{});return Promise.resolve(t.exact.reduce(function(e,i,a){try{var u=i.pluginName;return Promise.resolve(e).then(function(e){function i(){return Promise.resolve(e)}var a=function(){if(t.namespaced&&t.namespaced[u])return Promise.resolve(t.namespaced[u].reduce(function(e,t,n){try{return Promise.resolve(e).then(function(e){var n,i,a;return t.method&&g(t.method)?(function(e,t){var n=ev(e);if(n&&n.name===t){var r=ev(n.method);throw Error([t+" plugin is calling method "+e,"Plugins cant call self","Use "+n.method+" "+(r?"or "+r.method:"")+" in "+t+" plugin insteadof "+e,].join("\n"))}}(t.methodName,t.pluginName),Promise.resolve(t.method({payload:e,instance:r,abort:(n=e,i=u,a=t.pluginName,function(e,t){return O({},n,{abort:{reason:e,plugins:t||[i,],caller:p,from:a||i}})}),config:ef(t.pluginName,f,o),plugins:f})).then(function(t){var n=$(t)?t:{};return Promise.resolve(O({},e,n))})):e})}catch(i){return Promise.reject(i)}},Promise.resolve(n))).then(function(t){e[u]=t});e[u]=n}();return a&&a.then?a.then(i):i()})}catch(c){return Promise.reject(c)}},Promise.resolve({}))).then(function(e){return Promise.resolve(t.exact.reduce(function(n,i,a){try{var c=t.exact.length===a+1,s=i.pluginName,l=o[s];return Promise.resolve(n).then(function(t){var n=e[s]?e[s]:{};if(m&&(n=t),eg(n,s))return el({data:n,method:p,instance:r,pluginName:s,store:u}),Promise.resolve(t);if(eg(t,s))return c&&el({data:t,method:p,instance:r,store:u}),Promise.resolve(t);if(v.hasOwnProperty(s)&&!0===v[s])return u.dispatch({type:"queue",plugin:s,payload:n,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(t);var i=h(e[s],o[s]);return Promise.resolve(l[p]({abort:i.abort,payload:n,instance:r,config:ef(s,f,o),plugins:f})).then(function(i){var o=$(i)?i:{},a=O({},t,o),c=e[s];if(eg(c,s))el({data:c,method:p,instance:r,pluginName:s,store:u});else{var l=p+":"+s;!((l.match(/:/g)||[]).length<2)||p.match(ec)||p.match(es)||r.dispatch(O({},m?a:n,{type:l,_:{called:l,from:"submethod"}}))}return Promise.resolve(a)})})}catch(d){return Promise.reject(d)}},Promise.resolve(n))).then(function(e){if(!(p.match(eu)||p.match(/^registerPlugin/)||p.match(es)||p.match(ec)||p.match(/^params/)||p.match(/^userIdChanged/))){if(c.plugins.includes(p),e._&&e._.originalAction===p)return e;var n=O({},e,{_:{originalAction:e.type,called:e.type,from:"engineEnd"}});em(e,t.exact.length)&&!p.match(/End$/)&&(n=O({},n,{type:e.type+"Aborted"})),u.dispatch(n)}return e})})}catch(b){return Promise.reject(b)}},eu=/Start$/,ec=/^bootstrap/,es=/^ready/;function el(e){var t=e.pluginName,n=e.method+"Aborted"+(t?":"+t:"");e.store.dispatch(O({},e.data,{type:n,_:{called:n,from:"abort"}}))}function ef(e,t,n){var r=t[e]||n[e];return r&&r.config?r.config:{}}function ed(e,t){return t.reduce(function(t,n){return n[e]?t.concat({methodName:e,pluginName:n.name,method:n[e]}):t},[])}function ep(e,t){var n=e.replace(eu,""),r=t?":"+t:"";return[""+e+r,""+n+r,n+"End"+r]}function eg(e,t){var n=e.abort;return!!n&&(!0===n||eh(n,t)||n&&eh(n.plugins,t))}function em(e,t){var n=e.abort;if(!n)return!1;if(!0===n||m(n))return!0;var r=n.plugins;return ey(n)&&n.length===t||ey(r)&&r.length===t}function ey(e){return Array.isArray(e)}function eh(e,t){return!(!e||!ey(e))&&e.includes(t)}function ev(e){var t=e.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}var e$=function(){var e=this;this.before=[],this.after=[],this.addMiddleware=function(t,n){e[n]=e[n].concat(t)},this.removeMiddleware=function(t,n){var r=e[n].findIndex(function(e){return e===t});-1!==r&&(e[n]=[].concat(e[n].slice(0,r),e[n].slice(r+1)))},this.dynamicMiddlewares=function(t){return function(n){return function(r){return function(i){var o={getState:n.getState,dispatch:function(e){return n.dispatch(e)}},a=e[t].map(function(e){return e(o)});return q.apply(void 0,a)(r)(i)}}}}};function eb(e,t){return e.substring(t.length+1,e.length)}function eI(e,t,n){return e.reduce(function(e,r){return e[r]=O({},n[r],{enabled:t}),e},n)}function ew(e){try{return JSON.parse(JSON.stringify(e))}catch(t){}return e}var eS={last:{},history:[]};function e8(e,t){void 0===e&&(e=eS);var n=t.options,r=t.meta;if(t.type===Y.track){var i=ew(O({event:t.event,properties:t.properties},Object.keys(n).length&&{options:n},{meta:r}));return O({},e,{last:i,history:e.history.concat(i)})}return e}var eE={actions:[]};function ek(e,t){void 0===e&&(e=eE);var n,r=t.payload;switch(t.type){case"queue":return n=r&&r.type&&r.type===Y.identify?[t].concat(e.actions):e.actions.concat(t),O({},e,{actions:n});case"dequeue":return[];default:return e}}var ex,e_=/#.*$/,eP=function(e){if(void 0===e&&(e={}),!c)return e;var t,n,r,i,o=document,a=o.title,u=o.referrer,s=window,l=s.location,f=s.innerWidth,d=s.innerHeight,p=l.hash,g=l.search,m=(t=g,(n=function(){if(c){for(var e,t=document.getElementsByTagName("link"),n=0;e=t[n];n++)if("canonical"===e.getAttribute("rel"))return e.getAttribute("href")}}())?n.match(/\?/)?n:n+t:window.location.href.replace(e_,"")),y={title:a,url:m,path:(r=m,"/"+((i=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(r))&&i[3]?i[3].split("?")[0].replace(e_,""):"")),hash:p,search:g,width:f,height:d};return u&&""!==u&&(y.referrer=u),O({},y,e)},eA={last:{},history:[]};function eT(e,t){void 0===e&&(e=eA);var n=t.options;if(t.type===Y.page){var r=ew(O({properties:t.properties,meta:t.meta},Object.keys(n).length&&{options:n}));return O({},e,{last:r,history:e.history.concat(r)})}return e}ex={};var eN={initialized:!1,sessionId:k(),app:null,version:null,debug:!1,offline:!!c&&!navigator.onLine,os:{name:"na"},userAgent:c?navigator.userAgent:"node",library:{name:"analytics",version:"0.12.14"},timezone:void 0,locale:void 0,campaign:{},referrer:ex};function eL(e,t){void 0===e&&(e=eN);var n=e.initialized,r=t.campaign;switch(t.type){case Y.campaign:return O({},e,{campaign:r});case Y.offline:return O({},e,{offline:!0});case Y.online:return O({},e,{offline:!1});default:return n?e:O({},eN,e,{initialized:!0})}}var eC=["plugins","reducers","storage"];function ez(){return T("analytics",[]),function(e){return function(t,n,r){var i=e(t,n,r),o=i.dispatch;return Object.assign(i,{dispatch:function(e){return P[_].analytics.push(e.action||e),o(e)}})}}}function eO(e){return function(){return q(q.apply(null,arguments),ez())}}function ej(e){var t;return e?"array"===d(t=e)?e:[e]:[]}function eU(e,t,n){void 0===e&&(e={});var r,i,o=k();return t&&(er[o]=(r=t,i=function(e){for(var t,n=e||Array.prototype.slice.call(arguments),r=0;r<n.length;r++)if(g(n[r])){t=n[r];break}return t}(n),function(e){i&&i(e),r(e)})),O({},e,{rid:o,ts:new Date().getTime()},t?{hasCallback:!0}:{})}var e9="before",eD="after",eM="cookie",eB=eR(),e0=e1,eV=e1;function eq(e){return eB?e1(e,"",-1):N(e)}function eR(){if(void 0!==eB)return eB;var e="cookiecookie";try{e1(e,e),eB=-1!==document.cookie.indexOf(e),eq(e)}catch(t){eB=!1}return eB}function e1(e,t,n,r,i,o){if("undefined"!=typeof window){var a=arguments.length>1;return!1===eB&&(a?T(e,t):A(e)),a?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(i?"; domain="+i:"")+(o?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var e3="localStorage",e2=z.bind(null,"localStorage");L("localStorage","getItem",A),L("localStorage","setItem",T),L("localStorage","removeItem",N);var eH="sessionStorage",e4=z.bind(null,"sessionStorage");function e7(e){var t=e;try{if("true"===(t=JSON.parse(e)))return!0;if("false"===t)return!1;if($(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch(n){}if(null!==t&&""!==t)return t}L("sessionStorage","getItem",A),L("sessionStorage","setItem",T),L("sessionStorage","removeItem",N);var e6=e2(),eF=e4(),eG=eR();function eX(e,t){if(e){var n=eK(t),r=!eY(n),i=eW(n)?e7(localStorage.getItem(e)):void 0;if(r&&!y(i))return i;var o=e5(n)?e7(e0(e)):void 0;if(r&&o)return o;var a=eJ(n)?e7(sessionStorage.getItem(e)):void 0;if(r&&a)return a;var u=A(e);return r?u:{localStorage:i,sessionStorage:a,cookie:o,global:u}}}function eK(e){return e?m(e)?e:e.storage:"any"}function eW(e){return e6&&eZ(e,e3)}function e5(e){return eG&&eZ(e,eM)}function eJ(e){return eF&&eZ(e,eH)}function eY(e){return"*"===e||"all"===e}function eZ(e,t){return"any"===e||e===t||eY(e)}function eQ(e,t,n){return{location:e,current:t,previous:n}}var te={setItem:function e(t,n,r){if(t&&!y(n)){var i={},o=eK(r),a=JSON.stringify(n),u=!eY(o);return eW(o)&&(i[e3]=eQ(e3,n,e7(localStorage.getItem(t))),localStorage.setItem(t,a),u)?i[e3]:e5(o)&&(i[eM]=eQ(eM,n,e7(e0(t))),eV(t,a),u)?i[eM]:eJ(o)&&(i[eH]=eQ(eH,n,e7(sessionStorage.getItem(t))),sessionStorage.setItem(t,a),u)?i[eH]:(i[x]=eQ(x,n,A(t)),T(t,n),u?i[x]:i)}},getItem:eX,removeItem:function e(t,n){if(t){var r=eK(n),i=eX(t,"*"),o={};return!y(i.localStorage)&&eW(r)&&(localStorage.removeItem(t),o[e3]=i.localStorage),!y(i.cookie)&&e5(r)&&(eq(t),o[eM]=i.cookie),!y(i.sessionStorage)&&eJ(r)&&(sessionStorage.removeItem(t),o[eH]=i.sessionStorage),!y(i.global)&&eZ(r,x)&&(N(t),o[x]=i.global),o}}};function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function e(t){void 0===t&&(t={});var n,r,o,a,u,s,l,f,d,p,y,v,b,I,w,x=t.reducers||{},_=t.initialUser||{},P=(t.plugins||[]).reduce(function(e,t){if(g(t))return e.middlewares=e.middlewares.concat(t),e;if(t.NAMESPACE&&(t.name=t.NAMESPACE),!t.name)throw Error("https://lytics.dev/errors/1");t.config||(t.config={});var n=t.EVENTS?Object.keys(t.EVENTS).map(function(e){return t.EVENTS[e]}):[];e.pluginEnabled[t.name]=!(!1===t.enabled||!1===t.config.enabled),delete t.enabled,t.methods&&(e.methods[t.name]=Object.keys(t.methods).reduce(function(e,n){var r;return e[n]=(r=t.methods[n],function(){for(var e=Array.prototype.slice.call(arguments),t=Array(r.length),n=0;n<e.length;n++)t[n]=e[n];return t[t.length]=e_,r.apply({instance:e_},t)}),e},{}),delete t.methods);var r=Object.keys(t).concat(n),i=new Set(e.events.concat(r));if(e.events=Array.from(i),e.pluginsArray=e.pluginsArray.concat(t),e.plugins[t.name])throw Error(t.name+"AlreadyLoaded");return e.plugins[t.name]=t,e.plugins[t.name].loaded||(e.plugins[t.name].loaded=function(){return!0}),e},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),L=t.storage?t.storage:{getItem:A,setItem:T,removeItem:N},C=(n=L,function(e,t,r){return t.getState("user")[e]||(r&&$(r)&&r[e]?r[e]:et(n)[e]||A(en(e))||null)}),z=P.plugins,er=P.events.filter(function(e){return!J.includes(e)}).sort(),ec=Array.from(new Set(er.concat(W).filter(function(e){return!J.includes(e)}))).sort(),es=function(){return z},el=new e$,ef=el.addMiddleware,eg=el.removeMiddleware,ey=el.dynamicMiddlewares,eh=function(){throw Error("Abort disabled inListener")},ev=function(e){for(var t,n=Object.create(null),r=/([^&=]+)=?([^&]*)/g;t=r.exec(e);){var i=S(t[1]),o=S(t[2]);"[]"===i.substring(i.length-2)?(n[i=i.substring(0,i.length-2)]||(n[i]=[])).push(o):n[i]=""===o||o}for(var a in n){var u=a.split("[");u.length>1&&(E(n,u.map(function(e){return e.replace(/[?[\]\\ ]/g,"")}),n[a]),delete n[a])}return n}(function(e){if(e){var t=e.match(/\?(.*)/);return t&&t[1]?t[1].split("#")[0]:""}return c&&window.location.search.substring(1)}(void 0)),ew=et(L),eS=O({},ew,_,ev.an_uid?{userId:ev.an_uid}:{},ev.an_aid?{anonymousId:ev.an_aid}:{});eS.anonymousId||(eS.anonymousId=k());var eE=O({enable:function(e,t){return new Promise(function(n){e3.dispatch({type:Y.enablePlugin,plugins:ej(e),_:{originalAction:Y.enablePlugin}},n,[t])})},disable:function(e,t){return new Promise(function(n){e3.dispatch({type:Y.disablePlugin,plugins:ej(e),_:{originalAction:Y.disablePlugin}},n,[t])})}},P.methods),ex=!1,e_={identify:function(e,t,n,r){try{var i=m(e)?e:null,o=$(e)?e:t,a=n||{},u=e_.user();T(en(X),i);var c=i||o.userId||C(X,e_,o);return Promise.resolve(new Promise(function(e){e3.dispatch(O({type:Y.identifyStart,userId:c,traits:o||{},options:a,anonymousId:u.anonymousId},u.id&&u.id!==i&&{previousId:u.id}),e,[t,n,r])}))}catch(s){return Promise.reject(s)}},track:function(e,t,n,r){try{var i=$(e)?e.event:e;if(!i||!m(i))throw Error("EventMissing");var o=$(e)?e:t||{},a=$(n)?n:{};return Promise.resolve(new Promise(function(e){e3.dispatch({type:Y.trackStart,event:i,properties:o,options:a,userId:C(X,e_,t),anonymousId:C(K,e_,t)},e,[t,n,r])}))}catch(u){return Promise.reject(u)}},page:function(e,t,n){try{var r=$(e)?e:{},i=$(t)?t:{};return Promise.resolve(new Promise(function(o){e3.dispatch({type:Y.pageStart,properties:eP(r),options:i,userId:C(X,e_,r),anonymousId:C(K,e_,r)},o,[e,t,n])}))}catch(o){return Promise.reject(o)}},user:function(e){if(e===X||"id"===e)return C(X,e_);if(e===K||"anonId"===e)return C(K,e_);var t=e_.getState("user");return e?i(t,e):t},reset:function(e){return new Promise(function(t){e3.dispatch({type:Y.resetStart},t,e)})},ready:function(e){return ex&&e({plugins:eE,instance:e_}),e_.on(Y.ready,function(t){e(t),ex=!0})},on:function(e,t){if(!e||!g(t))return!1;if(e===Y.bootstrap)throw Error(".on disabled for "+e);var n=/Start$|Start:/;if("*"===e){var r=function(e){return function(e){return function(r){return r.type.match(n)&&t({payload:r,instance:e_,plugins:z}),e(r)}}},i=function(e){return function(e){return function(r){return r.type.match(n)||t({payload:r,instance:e_,plugins:z}),e(r)}}};return ef(r,e9),ef(i,eD),function(){eg(r,e9),eg(i,eD)}}var o=e.match(n)?e9:eD,a=function(n){return function(n){return function(r){return r.type===e&&t({payload:r,instance:e_,plugins:z,abort:eh}),n(r)}}};return ef(a,o),function(){return eg(a,o)}},once:function(e,t){if(!e||!g(t))return!1;if(e===Y.bootstrap)throw Error(".once disabled for "+e);var n=e_.on(e,function(e){t({payload:e.payload,instance:e_,plugins:z,abort:eh}),n()});return n},getState:function(e){var t=e3.getState();return e?i(t,e):Object.assign({},t)},dispatch:function(e){var t=m(e)?{type:e}:e;if(W.includes(t.type))throw Error("reserved action "+t.type);var n=O({},t,{_:O({originalAction:t.type},e._||{})});e3.dispatch(n)},enablePlugin:eE.enable,disablePlugin:eE.disable,plugins:eE,storage:{getItem:L.getItem,setItem:function(e,t,n){e3.dispatch({type:Y.setItemStart,key:e,value:t,options:n})},removeItem:function(e,t){e3.dispatch({type:Y.removeItemStart,key:e,options:t})}},setAnonymousId:function(e,t){e_.storage.setItem(H,e,t)},events:{core:W,plugins:er}},eA=P.middlewares.concat([function(e){return function(e){return function(t){return t.meta||(t.meta=eU()),e(t)}}},ey(e9),(r=e_,o=es,a={all:ec,plugins:er},u={},function(e){return function(t){return function(n){try{var i,c=function(e){return i?e:t(f)},s=n.type,l=n.plugins,f=n;if(n.abort)return Promise.resolve(t(n));if(s===Y.enablePlugin&&e.dispatch({type:Y.initializeStart,plugins:l,disabled:[],fromEnable:!0,meta:n.meta}),s===Y.disablePlugin&&setTimeout(function(){return ei(n.meta.rid,{payload:n})},0),s===Y.initializeEnd){var d=o(),p=Object.keys(d),m=p.filter(function(e){return l.includes(e)}).map(function(e){return d[e]}),y=[],v=[],b=n.disabled,I=m.map(function(t){var n=t.loaded,r=t.name,i=t.config;return(function e(t,n,r){return new Promise(function(i,o){return n()?i(t):r<1?o(O({},t,{queue:!0})):new Promise(function(e){return setTimeout(e,10)}).then(function(a){return e(t,n,r-10).then(i,o)})})})(t,function(){return n({config:i})},1e4).then(function(n){return u[r]||(e.dispatch({type:Y.pluginReadyType(r),name:r,events:Object.keys(t).filter(function(e){return!J.includes(e)})}),u[r]=!0),y=y.concat(r),t}).catch(function(e){if(e instanceof Error)throw Error(e);return v=v.concat(e.name),e})});Promise.all(I).then(function(t){var n={plugins:y,failed:v,disabled:b};setTimeout(function(){p.length===I.length+b.length&&e.dispatch(O({},{type:Y.ready},n))},0)})}var w=function(){if(s!==Y.bootstrap)return/^ready:([^:]*)$/.test(s)&&setTimeout(function(){return function(e,t,n){var r={},i=t(),o=e.getState(),a=o.plugins,u=o.queue,c=o.user;if(!o.context.offline&&u&&u.actions&&u.actions.length){var s=u.actions.reduce(function(e,t,n){return a[t.plugin].loaded?(e.process.push(t),e.processIndex.push(n)):(e.requeue.push(t),e.requeueIndex.push(n)),e},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(s.processIndex&&s.processIndex.length){s.processIndex.forEach(function(t){var o=u.actions[t],s=o.plugin,l=o.payload.type,f=i[s][l];if(f&&g(f)){var d,p,m,y=(d=o.payload,p=c,void 0===d&&(d={}),void 0===p&&(p={}),[X,K,].reduce(function(e,t){return d.hasOwnProperty(t)&&p[t]&&p[t]!==d[t]&&(e[t]=p[t]),e},d)),h=r[y.meta.rid];if(!h&&(m=f({payload:y,config:a[s].config,instance:n,abort:eo}))&&$(m)&&m.abort)return void(r[y.meta.rid]=!0);if(!h){var v=l+":"+s;e.dispatch(O({},y,{type:v,_:{called:v,from:"queueDrain"}}))}}});var l=u.actions.filter(function(e,t){return!~s.processIndex.indexOf(t)});u.actions=l}}}(e,o,r)},0),Promise.resolve(function(e,t,n,r,i){try{var o,a,u,c=g(t)?t():t,s=e.type,l=s.replace(eu,"");if(e._&&e._.called)return Promise.resolve(e);var f,d,p,m=n.getState(),y=(o=c,void 0===(a=m.plugins)&&(a={}),void 0===(u=e.options)&&(u={}),Object.keys(o).filter(function(e){var t=u.plugins||{};return h(t[e])?t[e]:!1!==t.all&&(!a[e]||!1!==a[e].enabled)}).map(function(e){return o[e]}));s===Y.initializeStart&&e.fromEnable&&(y=Object.keys(m.plugins).filter(function(t){var n=m.plugins[t];return e.plugins.includes(t)&&!n.initialized}).map(function(e){return c[e]}));var v=y.map(function(e){return e.name}),$=(f=s,d=y,p=ep(f).map(function(e){return ed(e,d)}),d.reduce(function(e,t){var n=t.name,r=ep(f,n).map(function(e){return ed(e,d)}),i=r[0],o=r[1],a=r[2];return i.length&&(e.beforeNS[n]=i),o.length&&(e.duringNS[n]=o),a.length&&(e.afterNS[n]=a),e},{before:p[0],beforeNS:{},during:p[1],duringNS:{},after:p[2],afterNS:{}}));return Promise.resolve(ea({action:e,data:{exact:$.before,namespaced:$.beforeNS},state:m,allPlugins:c,allMatches:$,instance:n,store:r,EVENTS:i})).then(function(e){function t(){var t=function(){if(s.match(eu))return Promise.resolve(ea({action:O({},o,{type:l+"End"}),data:{exact:$.after,namespaced:$.afterNS},state:m,allPlugins:c,allMatches:$,instance:n,store:r,EVENTS:i})).then(function(e){e.meta&&e.meta.hasCallback&&ei(e.meta.rid,{payload:e})})}();return t&&t.then?t.then(function(){return e}):e}if(em(e,v.length))return e;var o,a=function(){if(s!==l)return Promise.resolve(ea({action:O({},e,{type:l}),data:{exact:$.during,namespaced:$.duringNS},state:m,allPlugins:c,allMatches:$,instance:n,store:r,EVENTS:i})).then(function(e){o=e});o=e}();return a&&a.then?a.then(t):t()})}catch(b){return Promise.reject(b)}}(n,o,r,e,a)).then(function(e){return i=1,t(e)})}();return Promise.resolve(w&&w.then?w.then(c):c(w))}catch(S){return Promise.reject(S)}}}}),(s=L,function(e){return function(e){return function(t){var n=t.type,r=t.key,i=t.value,o=t.options;if(n===Y.setItem||n===Y.removeItem){if(t.abort)return e(t);n===Y.setItem?s.setItem(r,i,o):s.removeItem(r,o)}return e(t)}}}),(f=(l=e_).storage.setItem,function(e){return function(t){return function(n){if(n.type===Y.bootstrap){var r=n.params,i=n.user,o=n.persistedUser,a=n.initialUser,u=o.userId===i.userId;o.anonymousId!==i.anonymousId&&f(H,i.anonymousId),u||f(F,i.userId),a.traits&&f(G,O({},u&&o.traits?o.traits:{},a.traits));var c=Object.keys(n.params);if(c.length){var s=r.an_uid,d=r.an_event,p=c.reduce(function(e,t){if(t.match(Z)||t.match(/^(d|g)clid/)){var n=t.replace(Z,"");e.campaign["campaign"===n?"name":n]=r[t]}return t.match(Q)&&(e.props[t.replace(Q,"")]=r[t]),t.match(ee)&&(e.traits[t.replace(ee,"")]=r[t]),e},{campaign:{},props:{},traits:{}});e.dispatch(O({type:Y.params,raw:r},p,s?{userId:s}:{})),s&&setTimeout(function(){return l.identify(s,p.traits)},0),d&&setTimeout(function(){return l.track(d,p.props)},0),Object.keys(p.campaign).length&&e.dispatch({type:Y.campaign,campaign:p.campaign})}}return t(n)}}}),(y=(p=(d=e_).storage).setItem,v=p.removeItem,b=p.getItem,function(e){return function(t){return function(n){var r=n.userId,i=n.traits,o=n.options;if(n.type===Y.reset&&([F,G,H].forEach(function(e){v(e)}),[X,K,"traits"].forEach(function(e){N(en(e))})),n.type===Y.identify){b(H)||y(H,k());var a=b(F),u=b(G)||{};a&&a!==r&&e.dispatch({type:Y.userIdChanged,old:{userId:a,traits:u},new:{userId:r,traits:i},options:o}),r&&y(F,r),i&&y(G,O({},u,i))}return t(n)}}}),ey(eD),]),eN={context:eL,user:(I=L,function(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),t.type===Y.setItemEnd){if(t.key===H)return O({},e,{anonymousId:t.value});if(t.key===F)return O({},e,{userId:t.value})}switch(t.type){case Y.identify:return Object.assign({},e,{userId:t.userId,traits:O({},e.traits,t.traits)});case Y.reset:return[F,H,G].forEach(function(e){I.removeItem(e)}),Object.assign({},e,{userId:null,anonymousId:null,traits:{}});default:return e}}),page:eT,track:e8,plugins:(w=es,function(e,t){void 0===e&&(e={});var n={};if("initialize:aborted"===t.type)return e;if(/^registerPlugin:([^:]*)$/.test(t.type)){var r=eb(t.type,"registerPlugin"),i=w()[r];if(!i||!r)return e;var o=t.enabled,a=i.config;return n[r]={enabled:o,initialized:!!o&&Boolean(!i.initialize),loaded:!!o&&Boolean(i.loaded({config:a})),config:a},O({},e,n)}if(/^initialize:([^:]*)$/.test(t.type)){var u=eb(t.type,Y.initialize),c=w()[u];return c&&u?(n[u]=O({},e[u],{initialized:!0,loaded:Boolean(c.loaded({config:c.config}))}),O({},e,n)):e}if(/^ready:([^:]*)$/.test(t.type))return n[t.name]=O({},e[t.name],{loaded:!0}),O({},e,n);switch(t.type){case Y.disablePlugin:return O({},e,eI(t.plugins,!1,e));case Y.enablePlugin:return O({},e,eI(t.plugins,!0,e));default:return e}}),queue:ek},eM=q,eB=q;if(c&&t.debug){var e0=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;e0&&(eM=e0({trace:!0,traceLimit:25})),eB=function(){return 0===arguments.length?ez():$(typeof arguments[0])?eO():eO().apply(null,arguments)}}var eV,eq,eR=Object.keys(eV=t).reduce(function(e,t){return eC.includes(t)||(e[t]=eV[t]),e},{}),e1=P.pluginsArray.reduce(function(e,t){var n=t.name,r=t.config,i=t.loaded,o=P.pluginEnabled[n];return e[n]={enabled:o,initialized:!!o&&Boolean(!t.initialize),loaded:Boolean(i({config:r})),config:r},e},{}),e3=function e(t,n,r){if(typeof n===j&&typeof r===U&&(r=n,n=void 0),typeof r!==U){if(typeof r!==j)throw Error("enhancer"+B);return r(e)(t,n)}if(typeof t!==j)throw Error("reducer"+B);var i,o=t,a=n,u=[],c=u,s=!1;function l(){c===u&&(c=u.slice())}function f(){return a}function d(e){if(typeof e!==j)throw Error("Listener"+B);var t=!0;return l(),c.push(e),function(){if(t){t=!1,l();var n=c.indexOf(e);c.splice(n,1)}}}function p(e){if(!$(e))throw Error("Act != obj");if(typeof e.type===U)throw Error("ActType "+U);if(s)throw Error("Dispatch in reducer");try{s=!0,a=o(a,e)}finally{s=!1}for(var t=u=c,n=0;n<t.length;n++)(0,t[n])();return e}return p({type:"@@redux/INIT"}),(i={dispatch:p,subscribe:d,getState:f,replaceReducer:function(e){if(typeof e!==j)throw Error("next reducer"+B);o=e,p({type:"@@redux/INIT"})}})[M]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e)throw TypeError("Observer != obj");function n(){e.next&&e.next(a)}return n(),{unsubscribe:t(n)}}})[M]=function(){return this},e},i}(function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]===j&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(typeof n(void 0,{type:"@@redux/INIT"})===U||typeof n(void 0,{type:D})===U)throw Error("reducer "+t+" "+U)})}(n)}catch(u){o=u}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},u=0;u<a.length;u++){var c=a[u],s=e[c],l=(0,n[c])(s,t);if(typeof l===U){var f=V(c,t);throw Error(f)}i[c]=l,r=r||l!==s}return r?i:e}}(O({},eN,x)),{context:eR,user:eS,plugins:e1},eB(eM(R.apply(void 0,eA))));e3.dispatch=(eq=e3.dispatch,function(e,t,n){var r=O({},e,{meta:eU(e.meta,t,ej(n))});return eq.apply(null,[r])});var e2=Object.keys(z);e3.dispatch({type:Y.bootstrap,plugins:e2,config:eR,params:ev,user:eS,initialUser:_,persistedUser:ew});var eH=e2.filter(function(e){return P.pluginEnabled[e]}),e4=e2.filter(function(e){return!P.pluginEnabled[e]});return e3.dispatch({type:Y.registerPlugins,plugins:e2,enabled:P.pluginEnabled}),P.pluginsArray.map(function(e,t){var n=e.bootstrap,r=e.config,i=e.name;n&&g(n)&&n({instance:e_,config:r,payload:e}),e3.dispatch({type:Y.registerPluginType(i),name:i,enabled:P.pluginEnabled[i],plugin:e}),P.pluginsArray.length===t+1&&e3.dispatch({type:Y.initializeStart,plugins:eH,disabled:e4})}),e_}(r(r({},{storage:te}),e))}return e.Analytics=tt,e.CONSTANTS={__proto__:null,ANON_ID:H,USER_ID:F,USER_TRAITS:G},e.EVENTS=Y,e.default=tt,e.init=tt,Object.defineProperty(e,"__esModule",{value:!0}),e}({});